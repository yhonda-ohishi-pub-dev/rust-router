---
description: plan.md のチェックリストを確認・実行する。plan、チェックリスト、移行タスクについて聞かれたら自動的に使用する。
---

## 事前チェック（重要）

**agent_runner.py を実行する前に**、plan.md を読んで手動タスクを識別してください。

### 手動タスクの判定基準

以下に該当するタスクは**自動実行不可**（手動タスク）:

1. **外部ツールのインストール**: WiX Toolset、Visual Studio、Node.js等のGUIインストーラー
2. **ブラウザ操作**: フロントエンドテスト、WebUIでの確認
3. **外部サービス連携**: OAuth認証フロー、外部API登録
4. **GUI操作必須**: 設定画面、ダイアログ操作
5. **サブ項目に「要手動」「手動」がある**: 親タスクも手動扱い

### 手動タスク発見時の対応

1. 手動タスクに「手動」キーワードがない場合、**plan.md を編集して【手動】プレフィックス追加**
2. 未完了の手動タスクをユーザーに提示して、先に実行するか確認
3. ユーザーが「スキップ」「後で」と言った場合のみ agent_runner.py を実行

```markdown
# マーキング例
- [ ] 【手動】WiX Toolset インストール（Windows）
```

### 手動タスク提示フォーマット

```
## 手動タスク（自動実行不可）

以下のタスクは手動実行が必要です:

1. [ ] WiX Toolset インストール - https://wixtoolset.org/releases/
2. [ ] 署名設定

先に実行しますか？ スキップして自動タスクを進める場合は「スキップ」と入力してください。
```

---

Agent SDK の agent_runner.py を使用して plan.md のタスクを実行してください。

## 引数の解釈

ユーザーの指示に応じて適切なオプションを選択:

- 「進捗確認」「status」「状態」→ `--status` を使用
- 「手動タスクも含めて」「全部」→ `--include-manual` を使用
- 「ログクリア」「最初から」→ `--clear-log` を使用
- 「5エージェントまで」→ `--max-agents 5` を使用

## 実行コマンド

```bash
# 通常実行（手動タスクはスキップ）
py scripts/agent_runner.py

# オプション例
py scripts/agent_runner.py --status           # 進捗確認のみ
py scripts/agent_runner.py --include-manual   # 手動タスクも含める
py scripts/agent_runner.py --max-agents 5     # 最大5エージェント
py scripts/agent_runner.py --clear-log        # ログクリアして実行
```

## 実行後

- ログ確認: `agent_log.txt` を読んで進捗を報告
- エラー時: ログを確認して問題を特定

## 機能

- **手動タスク自動スキップ**: 「フロントエンド」「ブラウザ」等のタスクは自動スキップ
- **自動引き継ぎ**: コンテキスト80%超過で次エージェントへ
- **詳細ログ**: agent_log.txt にトークン使用量記録
- **引き継ぎ書**: HANDOVER.md で状態保存

## 手動タスクキーワード

以下のキーワードを含むタスクは手動タスクとして自動スキップ:
- 手動、ブラウザ、フロントエンド、外部サービス
- manual、browser、frontend
